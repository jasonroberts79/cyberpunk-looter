# Dependency Management

This project uses [uv](https://github.com/astral-sh/uv) for fast, reliable Python dependency management. Dependencies are specified in `pyproject.toml` and locked in `uv.lock`.

## Overview

- **pyproject.toml**: Primary dependency specification (modern Python standard)
- **uv.lock**: Lock file with exact versions for reproducible builds (auto-generated by uv)

## Managing Dependencies

### Adding a New Dependency

1. Edit `pyproject.toml` and add the dependency:
   ```toml
   dependencies = [
       "new-package>=1.0.0",
       # ... other dependencies
   ]
   ```

2. Update the lock file:
   ```bash
   make lock
   ```

   Or manually:
   ```bash
   uv lock
   ```

### Installing Dependencies

For local development:
```bash
make install
# or
uv sync
```

### Updating Dependencies

To update all dependencies to their latest compatible versions:

1. Update version constraints in `pyproject.toml` if needed
2. Update the lock file:
   ```bash
   make lock
   ```

## Available Make Commands

```bash
make help           # Show all available commands
make lock           # Update uv.lock from pyproject.toml
make sync           # Sync dependencies from uv.lock
make install        # Install dependencies (alias for sync)
make test           # Run tests and linting
make clean          # Remove generated files
```

## CI/CD Integration

The GitHub Actions workflows and Docker builds use `uv` for:
- Testing (app-deploy.yml)
- Docker builds (Dockerfile)

**Important**: Always commit both `pyproject.toml` and the generated `uv.lock` together when updating dependencies.

## Why uv?

- **Fast**: 10-100x faster than pip for installing packages
- **Reliable**: Deterministic resolution with comprehensive lock file
- **Modern**: Built-in Python version management and virtual environment handling
- **Compatible**: Works with standard pyproject.toml and can generate requirements.txt if needed

This approach gives you:
- Easy dependency management with pyproject.toml
- Reproducible builds with pinned versions in uv.lock
- Lightning-fast installation times
