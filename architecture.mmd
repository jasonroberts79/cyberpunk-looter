graph TB
      subgraph "External Services"
          Discord[Discord Platform]
          Grok[Grok/xAI API<br/>Chat Completion]
          OpenAI[OpenAI API<br/>Embeddings]
          Neo4j[(Neo4j Graph DB<br/>Knowledge Graph)]
          Replit[Replit Object Storage<br/>Persistent Files]
      end

      subgraph "Discord Bot Application"
          Bot[bot.py<br/>Discord Bot<br/>Commands Handler]

          subgraph "Core Systems"
              GraphRAG[graphrag_system.py<br/>GraphRAG System]
              Memory[memory_system.py<br/>Memory System]
              Storage[app_storage.py<br/>Storage Abstraction]
          end

          subgraph "Knowledge Base"
              KB[knowledge_base/<br/>PDF & Markdown Files]
          end
      end

      subgraph "Deployment Infrastructure"
          subgraph "CI/CD Pipeline"
              GHA[GitHub Actions<br/>Workflow]
              Docker[Docker Image<br/>Container]
          end

          subgraph "GCP Resources"
              AR[Artifact Registry<br/>Docker Repo]
              CloudRun[Cloud Run<br/>Service]
              SM[Secret Manager<br/>API Keys & Tokens]
              TF[Terraform<br/>Infrastructure]
          end
      end

      %% User Interactions
      Discord -->|Messages & Commands| Bot
      Bot -->|Responses| Discord

      %% Bot System Connections
      Bot -->|Query Context| GraphRAG
      Bot -->|Manage Memory| Memory
      Bot -->|Chat Requests| Grok

      %% GraphRAG Connections
      GraphRAG -->|Document Processing| KB
      GraphRAG -->|Store/Query Chunks| Neo4j
      GraphRAG -->|Generate Embeddings| OpenAI
      GraphRAG -->|Chat with Context| Grok
      GraphRAG -->|File Tracking| Storage

      %% Memory System Connections
      Memory -->|Persist Long-term Memory| Storage

      %% Storage Connections
      Storage -->|Read/Write| Replit

      %% Deployment Flow
      GHA -->|Build & Test| Docker
      Docker -->|Push Image| AR
      AR -->|Deploy| CloudRun
      CloudRun -->|Fetch Secrets| SM
      CloudRun -->|Run| Bot
      TF -.->|Provision| CloudRun
      TF -.->|Provision| AR
      TF -.->|Provision| SM

      %% Styling
      classDef external fill:#e1f5ff,stroke:#0288d1,stroke-width:2px
      classDef core fill:#fff3e0,stroke:#f57c00,stroke-width:2px
      classDef infra fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
      classDef storage fill:#e8f5e9,stroke:#388e3c,stroke-width:2px

      class Discord,Grok,OpenAI,Neo4j,Replit external
      class Bot,GraphRAG,Memory core
      class GHA,Docker,AR,CloudRun,SM,TF infra
      class Storage,KB storage